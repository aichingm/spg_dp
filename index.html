<!doctype html>
<html lang="en">
    <head>
        <title>SPG_DP</title>
        <meta charset="utf-8">
        <link rel="shortcut icon"  href="/favicon.png">
        <link rel="stylesheet" type="text/css" href="styles.css">
    </head>
    <body>
        <script src="js/three.min.js"></script>
        <script src="js/OrbitControls.js"></script>
        <script src="js/threex.transparency.js"></script>
        <script src="js/jquery-2.1.3.min.js"></script>
        <script type="text/javascript" src="js/drawing/function.draw.js"></script>
        <script type="text/javascript" src="js/drawing/function.init.js"></script>
        <script type="text/javascript" src="js/Geometries.js"></script>
        <script type="text/javascript" src="js/Materials.js"></script>
        <script type="text/javascript" src="js/events/on.document.keypress.js"></script>
        <script type="text/javascript" src="js/events/on.document.ready.js"></script>
        <script>
            // JsHint directives
            /* global THREE */
            /* global THREEx */
            /* global Storage */
            var updateFcts = [];
            var scene, camera, renderer;
            function clearScene() {
                var obj, i;
                for (i = scene.children.length - 1; i >= 0; i--) {
                    obj = scene.children[ i ];
                    if (obj !== camera) {
                        scene.remove(obj);
                    }
                }
            }
            // Set up the scene, camera, and renderer as global variables.
            init();
            animate();
            

            // Renders the scene and updates the render as needed.
            function animate() {
                requestAnimationFrame(animate);
                // Render the scene.
                renderer.render(scene, camera);
                controls.update();
                updateFcts.forEach(function (updateFn) {
                    updateFn();
                });
            }
            
            function buildShowDiv() {
                if (typeof (Storage) !== "undefined") {
                    var exports = localStorage.getItem("PieceofShit.exports");
                    //check if they are valid
                    if (exports !== null && exports !== undefined && exports.length > 0) {
                        //draw them
                        var data = JSON.parse(exports);
                        $("#drawFloors").html("");
                        $(data.modelManager.floors).each(function (k) {
                            $("#drawFloors").append("<option selected='selected' value='" + k + "'>" + this.name + "</option>");
                        });
                        $("#drawFloors").attr("size", data.modelManager.floors.length);
                    }
                    $("#drawFloors").change(function (e) {
                        if (typeof (Storage) !== "undefined") {
                            var exports = localStorage.getItem("PieceofShit.exports");
                            //check if they are valid
                            if (exports !== null && exports !== undefined && exports.length > 0) {
                                //draw them
                                draw(JSON.parse(exports), true);
                            }
                        }
                    });
                }
            }
        </script>
        <div id="settings">
            <div class="settingsLine settingsLineH1">
                Settings
            </div>
            <div class="settingsLine">
                Draw Floors<br>
                <select multiple="" id="drawFloors">
                </select>
            </div>
        </div>
    </body>
</html>
